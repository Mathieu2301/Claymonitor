<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="A front-end template that helps you build fast, modern mobile web apps.">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <title>Claymonitor settings</title>

    <script>if (typeof module === 'object') {window.module = module; module = undefined;}</script>
    <script src="jquery.js"></script>    
    <script src="chartjs/Chart.bundle.min.js"></script>
    <script src="chartjs/Chart.min.js"></script>
    <script src="socket.io.js"></script> 
    <script>if (window.module) module = window.module;</script>
    
    <script>

      function getCookie(cname) {
        var name = cname + "=";
        var decodedCookie = decodeURIComponent(document.cookie);
        var ca = decodedCookie.split(';');
        for(var i = 0; i <ca.length; i++) {
          var c = ca[i];
          while (c.charAt(0) == ' ') {
            c = c.substring(1);
          }
          if (c.indexOf(name) == 0) {
            return c.substring(name.length, c.length);
          }
        }
        return "";
      }

    </script>

    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:regular,bold,italic,thin,light,bolditalic,black,medium&amp;lang=en">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.cyan-light_blue.min.css">
    <link rel="stylesheet" href="styles.css">
    <style>
    </style>
  </head>
  <body>
    <div class="demo-layout mdl-layout mdl-js-layout mdl-layout--fixed-drawer mdl-layout--fixed-header">
      <header class="demo-header mdl-layout__header mdl-color--grey-100 mdl-color-text--grey-600">
        <div class="mdl-layout__header-row">
          <span class="mdl-layout-title">Claymonitor settings</span>
      </header>
      <div class="demo-drawer mdl-layout__drawer mdl-color--blue-grey-900 mdl-color-text--blue-grey-50">
        <nav class="demo-navigation mdl-navigation mdl-color--blue-grey-800">
          <a class="mdl-navigation__link" href="/"><i class="mdl-color-text--blue-grey-400 material-icons" role="presentation">dashboard</i>Dashboard</a>
          <a class="mdl-navigation__link" href="/settings.html"><i class="mdl-color-text--blue-grey-400 material-icons" role="presentation">settings</i>Settings</a>
        </nav>
      </div>
      <main class="mdl-layout__content mdl-color--grey-100">
        <div class="mdl-grid demo-content" id="main_screen" style="display: none;">
          <div class="demo-graphs mdl-shadow--2dp mdl-color--white mdl-cell mdl-cell--8-col">
            <h5>Configure your rig</h5></br>
            <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
              <input class="mdl-textfield__input" type="text" id="rig_ip_txt">
              <label class="mdl-textfield__label" for="rig_ip_txt">Claymore remote IP</label>
            </div>
            <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
              <input class="mdl-textfield__input" type="text" pattern="-?[0-9]*(\.[0-9]+)?" id="rig_port_txt">
              <label class="mdl-textfield__label" for="rig_port_txt">Claymore remote Port</label>
              <span class="mdl-textfield__error">Invalid port</span>
            </div>
            <div class="mdl-textfield">
              <p id='interval_slider_label'>Update interval : 3000<p>
              <input class="mdl-slider mdl-js-slider" type="range" min="1000" max="5000" value="3000" tabindex="0" id="interval_slider">
            </div>
            <button class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent" id="update_btn">
              Update
            </button>

            <script>              
              var socket = io();
              $("#main_screen").fadeIn();
              socket.on('config', function(config){
                $('#rig_ip_txt').val(config.claymore_remote_ip);
                $('#rig_port_txt').val(config.claymore_remote_port);
                $('#claymore_interval_slider').val(config.claymore_remote_interval);

                $('#update_btn').on("click", function(){
                  config.claymore_remote_ip = $('#rig_ip_txt').val();
                  config.claymore_remote_port = $('#rig_port_txt').val()*10/10;
                  socket.emit('changeConfig', config)
                  document.location.href="/";
                });
              })

              var slider = document.getElementById("interval_slider");
              slider.oninput = function() {
                $("#interval_slider_label").text("Update interval : " + slider.value);
              }
            </script></br></br></br></br></br></br></br></br></br></br></br></br></br>
          </div>
        
        </div>
        <footer class="mdl-mini-footer">
          <div class="mdl-mini-footer__left-section">
            This tool is free. If you like it, please donate :D</br></br>
            ETH : 0x22e024f441efb2109edc822a013f575ebfebba38</br>
            BTC : 1KCehKru5UJWB5NjbDYVSA49DQh7t2gb22</br>
            Paypal : <a href="https://www.paypal.me/MathieuColmon">paypal.me/MathieuColmon</a></br></br>
            Version : 1.0.5
          </div>
        </footer>
      </main>
    </div>
    <script src="https://code.getmdl.io/1.3.0/material.min.js"></script>
  </body>
</html>
